(this.webpackJsonpturnipview=this.webpackJsonpturnipview||[]).push([[0],{226:function(e,n,t){},404:function(e,n,t){},424:function(e,n,t){"use strict";t.r(n);var i=t(0),a=t(200),o=t.n(a),r=(t(226),t(11)),c=t(126),s=t(125),d=t.n(s),l=t(212),u=t(36),b=t(445),v=t(446),j=t(447),f=t(4),h=function(e){return Object(f.jsxs)(v.a,{display:"flex",alignItems:"center",children:[Object(f.jsx)(v.a,{width:"100%",mr:1,children:Object(f.jsx)(b.a,Object(u.a)({variant:"determinate"},e))}),Object(f.jsx)(v.a,{minWidth:35,children:Object(f.jsx)(j.a,{variant:"body2",color:"textSecondary",children:"".concat(Math.round(e.value),"%")})})]})},O=t(443),w=t(442),m=t(15),g=t(41),p=Object(m.a)(O.a)((function(e){return{color:e.theme.palette.getContrastText(g.a[300]),backgroundColor:g.a[300],"&:hover":{backgroundColor:g.a[400]}}}));window.Android=window.Android||{};var x=function(e){var n=e.schema,t=e.uiSchema,a=e.id,o=e.formContext,c=e.disabled,s=(e.onChange,e.value),b=!!t["ui:options"]&&t["ui:options"].private,v=a.replace("root_",""),m=Object(i.useState)({}),g=Object(r.a)(m,2),x=g[0],S=g[1],y=Object(i.useState)({}),_=Object(r.a)(y,2),E=_[0],C=_[1];Object(i.useEffect)((function(){if(o&&o.hasOwnProperty(v)){var n=o[v];S((function(e){return Object(u.a)(Object(u.a)({},e),n)}));var t={};if(Object.keys(n).forEach((function(e){n[e].isFinished&&(t[e]=n[e].storagePath)})),Object.keys(t).length>0){var i=s&&"string"===typeof s?JSON.parse(s):{},a=JSON.stringify(Object(u.a)(Object(u.a)({},i),t));e.onChange(a)}}}),[a,o]),Object(i.useEffect)((function(){if(s){console.log("value useEffect",s);var e=s&&"string"===typeof s?JSON.parse(s):{};C(e);var n={};Object.keys(e).forEach((function(t){var i=e[t];n[t]={storagePath:i,isFinished:!0}})),S(n)}}),[s]);var F=function(){var n=Object(l.a)(d.a.mark((function n(t){var i,a;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("Android"in window&&window.Android.deleteFile(v,t),i=E,a=Object(u.a)({},x),t in a&&(delete a[t],S(a)),!(t in i)){n.next=10;break}return delete i[t],C(i),n.next=9,e.onChange(JSON.stringify(i));case 9:A();case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),A=function(){return e.onBlur(a,"")},k=function(){return e.onFocus(a,"")},N=function(e){var n=e.isFinished,t=e.name,i=e.path;return n?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(O.a,{variant:"text",size:"small",onClick:function(){return F(t)},onBlur:A,onFocus:k,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),Object(f.jsx)(O.a,{variant:"text",size:"small",onClick:function(){return e=i,void("Android"in window&&(console.log("Preview File",e),window.Android.previewFile(e)));var e},onBlur:A,onFocus:k,children:"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0444\u0430\u0439\u043b"})]}):Object(f.jsx)(O.a,{variant:"text",size:"small",onClick:function(){return e=t,void("Android"in window&&(console.log("Cancel File",e),window.Android.cancelWork(e)));var e},onBlur:A,onFocus:k,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0443"})};return Object(f.jsxs)("div",{children:[Object(f.jsx)("label",{className:"form-label",children:null===n||void 0===n?void 0:n.title}),Object(f.jsx)("br",{}),Object(f.jsxs)(w.a,{spacing:1,direction:"row",children:[Object(f.jsx)(p,{disabled:c,onClick:function(){"Android"in window&&window.Android.pickPhotos(v,b)},size:"small",onBlur:A,onFocus:k,children:"\u0424\u043e\u0442\u043e"}),Object(f.jsx)(p,{disabled:c,onClick:function(){"Android"in window&&window.Android.pickVideos(v,b)},size:"small",onBlur:A,onFocus:k,children:"\u0412\u0438\u0434\u0435\u043e"})]}),Object.keys(x).map((function(e,n){var t,i="string"===typeof x[e].progress?parseInt(x[e].progress):x[e].progress,a=x[e].storagePath,o=x[e].isFinished,r=null!==(t=x[e].workTag)&&void 0!==t?t:"TAG_UPLOAD";return Object(f.jsxs)("div",{style:{paddingTop:10},children:[Object(f.jsxs)(w.a,{spacing:1,direction:"row",alignItems:"center",children:[Object(f.jsx)(j.a,{noWrap:!0,children:e}),Object(f.jsx)(N,{name:e,path:a,isFinished:o})]}),!o&&Object(f.jsxs)("div",{children:[Object(f.jsx)(j.a,{children:"TAG_COMPRESS"===r?"\u0421\u0436\u0430\u0442\u0438\u0435 \u0444\u0430\u0439\u043b\u0430":"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0444\u0430\u0439\u043b\u0430"}),Object(f.jsx)(h,{value:null!==i&&void 0!==i?i:0})]})]},"".concat(e,"_").concat(n))}))]})},S=(t(404),t(405),t(216)),y=function(e){var n=e.data;return Object(f.jsx)(S.a,{id:"ViewerTinyMCE",value:n,inline:!1,disabled:!0,tinymceScriptSrc:"/TurnipView/tinymce/tinymce.min.js",init:{plugins:"autoresize",toolbar:!1,menubar:!1,image_advtab:!0,importcss_append:!0}})},_=t(8),E=t(214),C=t.n(E),F=function(e){var n,t,a,o=e.id,c=e.placeholder,s=e.required,d=e.readonly,l=e.disabled,u=e.label,b=e.value,v=e.onChange,j=e.onBlur,h=e.onFocus,O=e.autofocus,w=e.options,m=e.schema,g=e.rawErrors,p=void 0===g?[]:g,x=null!==(n=w.searchField)&&void 0!==n?n:"search",S=null!==(t=w.responseField)&&void 0!==t?t:"text",y=null!==(a=null===w||void 0===w?void 0:w.params)&&void 0!==a?a:"",E=Object(i.useState)([]),F=Object(r.a)(E,2),A=F[0],k=F[1],N=function(){if(w.webhook){var e="".concat(w.webhook,"?").concat(x,"=").concat(b+y);C.a.get(e).then((function(e){return e.data})).then((function(e){return k(e.results)})).catch((function(e){return console.log(e)}))}},L="string"===m.type?"text":"".concat(m.type);return Object(f.jsxs)(_.a.Group,{className:"mb-0",children:[Object(f.jsxs)(_.a.Label,{className:p.length>0?"text-danger":"",children:[u||m.title,(u||m.title)&&s?"*":null]}),Object(f.jsx)(_.a.Control,{id:o,placeholder:c,autoFocus:O,required:s,disabled:l,readOnly:d,className:p.length>0?"is-invalid":"",list:"examples_".concat(o),type:L,value:b||0===b?b:"",onChange:function(e){var n=e.target.value;return N(),v(""===n?w.emptyValue:n)},onBlur:function(e){var n=e.target.value;return j(o,n)},onFocus:function(e){var n=e.target.value;return h(o,n)}}),A&&A.length>0?Object(f.jsx)("datalist",{id:"examples_".concat(o),children:A.map((function(e,n){return Object(f.jsx)("option",{value:e[S]},"".concat(e[S],"_").concat(n))}))}):null]})},A=function(e){var n=e.id,t=e.schema,i=e.options,a=e.value,o=e.required,r=e.disabled,c=e.readonly,s=e.label,d=e.onChange,l=e.onBlur,u=e.onFocus,b=i.enumOptions,v=i.enumDisabled,j=function(e){var n=e.target.value;return d("boolean"==t.type?"false"!==n:n)},h=function(e){var t=e.target.value;return l(n,t)},O=function(e){var t=e.target.value;return u(n,t)},w=Boolean(i&&i.inline);return Object(f.jsxs)(_.a.Group,{className:"mb-0",children:[Object(f.jsxs)(_.a.Label,{className:"d-block",children:[s||t.title,(s||t.title)&&o?"*":null]}),b.map((function(e,t){var i=Array.isArray(v)&&-1!==v.indexOf(e.value),s=e.value==a;return Object(f.jsx)(_.a.Check,{inline:w,label:e.label,id:"".concat(n,"_").concat(e.label),name:n,type:"radio",disabled:r||i||c,checked:s,required:o,value:e.value,onChange:j,onBlur:h,onFocus:O},t)}))]})},k=function(e){var n=e.required,t=e.label,i=e.value,a=e.schema,o=e.rawErrors,r=void 0===o?[]:o;return i?Object(f.jsxs)(_.a.Group,{className:"mb-0",children:[Object(f.jsxs)(_.a.Label,{className:r.length>0?"text-danger":"",children:[t||a.title,(t||a.title)&&n?"*":null]}),Object(f.jsx)("br",{}),Object(f.jsx)("a",{href:i,children:i})]}):null};window.Android=window.Android||{};var N=function(){var e=Object(i.useState)({}),n=Object(r.a)(e,2),t=n[0],a=n[1],o=Object(i.useState)({}),s=Object(r.a)(o,2),d=s[0],l=s[1],u=Object(i.useState)({}),b=Object(r.a)(u,2),v=b[0],j=b[1],h=Object(i.useState)({}),O=Object(r.a)(h,2),w=O[0],m=O[1],g=Object(i.useState)([]),S=Object(r.a)(g,2),_=S[0],E=S[1],C=Object(i.useState)(""),N=Object(r.a)(C,2),L=N[0],T=N[1],B=Object(i.useState)(!1),J=Object(r.a)(B,2),D=J[0],P=J[1],I=Object(i.useState)(!1),z=Object(r.a)(I,2),G=z[0],R=z[1],q={customfile:x,autocomplete:F,RadioWidget:A,customlink:k};return Object(i.useEffect)((function(){return window.addEventListener("android_schema_event",(function(e){var n=e.detail;a(n.jsonSchema),l(n.uiSchema),P(n.isComplete),R(!0)})),window.addEventListener("android_data_event",(function(e){console.log("JS FORMDATA",JSON.stringify(e.detail)),j(e.detail)})),window.addEventListener("android_file_event",(function(e){console.log("FILEDATA",e.detail),m(e.detail)})),window.addEventListener("android_rich_text_event",(function(e){console.log("RICH TEXT",JSON.stringify(e.detail)),T(e.detail.rich_text)})),window.addEventListener("android_previous_tasks_event",(function(e){console.log("PREVIOUS TASKS",JSON.stringify(e.detail)),E(e.detail)})),window.Android.listenersReady(),function(){window.removeEventListener("android_json_event",(function(e){return console.log("Event inside webview",e.detail)})),window.removeEventListener("android_ui_event",(function(e){return console.log("Event inside webview",e.detail)})),window.removeEventListener("android_data_event",(function(e){return console.log("Event inside webview",e.detail)})),window.removeEventListener("android_file_event",(function(e){return console.log("Event inside webview",e.detail)})),window.removeEventListener("android_rich_text_event",(function(e){return console.log("Event inside webview",e.detail)})),window.removeEventListener("android_previous_tasks_event",(function(e){return console.log("Event inside webview",e.detail)}))}}),[]),Object(f.jsxs)("div",{style:{padding:4},children:[L?Object(f.jsx)(y,{data:L}):null,_.map((function(e,n){var t=e.jsonSchema,i=e.uiSchema,a=e.responses;return Object(f.jsx)(c.a,{schema:t,uiSchema:i,formData:a,widgets:q,disabled:!0,children:" "},n)})),Object(f.jsx)(c.a,{schema:t,uiSchema:d,formData:v,widgets:q,disabled:D,formContext:w,onChange:function(e,n){if(G){j(e.formData);var t=JSON.stringify(e.formData);console.log("ON CHANGE",t),window.Android.onChange(t)}},onSubmit:function(e){j(e.formData);var n=JSON.stringify(e.formData);"Android"in window&&window.Android.onFormSubmit(n)},children:Object(f.jsx)(p,{type:"submit",disabled:D,children:"Submit"})})]})},L=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,448)).then((function(n){var t=n.getCLS,i=n.getFID,a=n.getFCP,o=n.getLCP,r=n.getTTFB;t(e),i(e),a(e),o(e),r(e)}))};o.a.render(Object(f.jsx)(N,{}),document.getElementById("root")),L()}},[[424,1,2]]]);
//# sourceMappingURL=main.dae2467b.chunk.js.map