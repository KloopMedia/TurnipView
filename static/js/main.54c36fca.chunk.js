(this.webpackJsonpturnipview=this.webpackJsonpturnipview||[]).push([[0],{226:function(e,n,t){},404:function(e,n,t){},424:function(e,n,t){"use strict";t.r(n);var i=t(0),a=t(201),o=t.n(a),r=(t(226),t(10)),c=t(126),s=t(125),d=t.n(s),l=t(213),u=t(36),b=t(445),j=t(446),v=t(447),f=t(4),h=function(e){return Object(f.jsxs)(j.a,{display:"flex",alignItems:"center",children:[Object(f.jsx)(j.a,{width:"100%",mr:1,children:Object(f.jsx)(b.a,Object(u.a)({variant:"determinate"},e))}),Object(f.jsx)(j.a,{minWidth:35,children:Object(f.jsx)(v.a,{variant:"body2",color:"textSecondary",children:"".concat(Math.round(e.value),"%")})})]})},O=t(443),w=t(442),m=t(15),p=t(41),g=Object(m.a)(O.a)((function(e){return{color:e.theme.palette.getContrastText(p.a[300]),backgroundColor:p.a[300],"&:hover":{backgroundColor:p.a[400]}}}));window.Android=window.Android||{};var x=function(e){var n=e.schema,t=e.uiSchema,a=e.id,o=e.formContext,c=e.disabled,s=(e.onChange,e.value),b=!!t["ui:options"]&&t["ui:options"].private,j=a.replace("root_",""),m=Object(i.useState)({}),p=Object(r.a)(m,2),x=p[0],y=p[1],S=Object(i.useState)({}),_=Object(r.a)(S,2),E=_[0],A=_[1];Object(i.useEffect)((function(){if(o&&o.hasOwnProperty(j)){var n=o[j];y((function(e){return Object(u.a)(Object(u.a)({},e),n)}));var t={};if(Object.keys(n).forEach((function(e){n[e].isFinished&&(t[e]=n[e].storagePath)})),Object.keys(t).length>0){var i=s&&"string"===typeof s?JSON.parse(s):{},a=JSON.stringify(Object(u.a)(Object(u.a)({},i),t));e.onChange(a)}}}),[a,o]),Object(i.useEffect)((function(){if(s){console.log("value useEffect",s);var e=s&&"string"===typeof s?JSON.parse(s):{};A(e);var n={};Object.keys(e).forEach((function(t){var i=e[t];n[t]={storagePath:i,isFinished:!0}})),y(n)}}),[s]);var C=function(){var n=Object(l.a)(d.a.mark((function n(t){var i,a;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("Android"in window&&window.Android.deleteFile(j,t),i=E,a=Object(u.a)({},x),t in a&&(delete a[t],y(a)),!(t in i)){n.next=10;break}return delete i[t],A(i),n.next=9,e.onChange(JSON.stringify(i));case 9:F();case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),F=function(){return e.onBlur(a,"")},k=function(){return e.onFocus(a,"")},N=function(e){var n=e.isFinished,t=e.name,i=e.path;return n?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(O.a,{variant:"text",size:"small",onClick:function(){return C(t)},onBlur:F,onFocus:k,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),Object(f.jsx)(O.a,{variant:"text",size:"small",onClick:function(){return e=i,void("Android"in window&&(console.log("Preview File",e),window.Android.previewFile(e)));var e},onBlur:F,onFocus:k,children:"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0444\u0430\u0439\u043b"})]}):Object(f.jsx)(O.a,{variant:"text",size:"small",onClick:function(){return e=t,void("Android"in window&&(console.log("Cancel File",e),window.Android.cancelWork(e)));var e},onBlur:F,onFocus:k,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0443"})};return Object(f.jsxs)("div",{children:[Object(f.jsx)("label",{className:"form-label",children:null===n||void 0===n?void 0:n.title}),Object(f.jsx)("br",{}),Object(f.jsxs)(w.a,{spacing:1,direction:"row",children:[Object(f.jsx)(g,{disabled:c,onClick:function(){"Android"in window&&window.Android.pickPhotos(j,b)},size:"small",onBlur:F,onFocus:k,children:"\u0424\u043e\u0442\u043e"}),Object(f.jsx)(g,{disabled:c,onClick:function(){"Android"in window&&window.Android.pickVideos(j,b)},size:"small",onBlur:F,onFocus:k,children:"\u0412\u0438\u0434\u0435\u043e"})]}),Object.keys(x).map((function(e,n){var t,i="string"===typeof x[e].progress?parseInt(x[e].progress):x[e].progress,a=x[e].storagePath,o=x[e].isFinished,r=null!==(t=x[e].workTag)&&void 0!==t?t:"TAG_UPLOAD";return Object(f.jsxs)("div",{style:{paddingTop:10},children:[Object(f.jsxs)(w.a,{spacing:1,direction:"row",alignItems:"center",children:[Object(f.jsx)(v.a,{noWrap:!0,children:e}),Object(f.jsx)(N,{name:e,path:a,isFinished:o})]}),!o&&Object(f.jsxs)("div",{children:[Object(f.jsx)(v.a,{children:"TAG_COMPRESS"===r?"\u0421\u0436\u0430\u0442\u0438\u0435 \u0444\u0430\u0439\u043b\u0430":"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0444\u0430\u0439\u043b\u0430"}),Object(f.jsx)(h,{value:null!==i&&void 0!==i?i:0})]})]},"".concat(e,"_").concat(n))}))]})},y=(t(404),t(405),t(217)),S=function(e){var n=e.data;return Object(f.jsx)(y.a,{id:"ViewerTinyMCE",value:n,inline:!1,disabled:!0,tinymceScriptSrc:"/TurnipView/tinymce/tinymce.min.js",init:{plugins:"autoresize",toolbar:!1,menubar:!1,image_advtab:!0,importcss_append:!0}})},_=t(8),E=t(215),A=t.n(E),C=function(e){var n,t,a,o=e.id,c=e.placeholder,s=e.required,d=e.readonly,l=e.disabled,u=e.label,b=e.value,j=e.onChange,v=e.onBlur,h=e.onFocus,O=e.autofocus,w=e.options,m=e.schema,p=e.rawErrors,g=void 0===p?[]:p,x=null!==(n=w.searchField)&&void 0!==n?n:"search",y=null!==(t=w.responseField)&&void 0!==t?t:"text",S=null!==(a=null===w||void 0===w?void 0:w.params)&&void 0!==a?a:"",E=Object(i.useState)([]),C=Object(r.a)(E,2),F=C[0],k=C[1],N=function(){if(w.webhook){var e="".concat(w.webhook,"?").concat(x,"=").concat(b+S);A.a.get(e).then((function(e){return e.data})).then((function(e){return k(e.results)})).catch((function(e){return console.log(e)}))}},L="string"===m.type?"text":"".concat(m.type);return Object(f.jsxs)(_.a.Group,{className:"mb-0",children:[Object(f.jsxs)(_.a.Label,{className:g.length>0?"text-danger":"",children:[u||m.title,(u||m.title)&&s?"*":null]}),Object(f.jsx)(_.a.Control,{id:o,placeholder:c,autoFocus:O,required:s,disabled:l,readOnly:d,className:g.length>0?"is-invalid":"",list:"examples_".concat(o),type:L,value:b||0===b?b:"",onChange:function(e){var n=e.target.value;return N(),j(""===n?w.emptyValue:n)},onBlur:function(e){var n=e.target.value;return v(o,n)},onFocus:function(e){var n=e.target.value;return h(o,n)}}),F&&F.length>0?Object(f.jsx)("datalist",{id:"examples_".concat(o),children:F.map((function(e,n){return Object(f.jsx)("option",{value:e[y]},"".concat(e[y],"_").concat(n))}))}):null]})},F=function(e){var n=e.id,t=e.schema,i=e.options,a=e.value,o=e.required,r=e.disabled,c=e.readonly,s=e.label,d=e.onChange,l=e.onBlur,u=e.onFocus,b=i.enumOptions,j=i.enumDisabled,v=function(e){var n=e.target.value;return d("boolean"==t.type?"false"!==n:n)},h=function(e){var t=e.target.value;return l(n,t)},O=function(e){var t=e.target.value;return u(n,t)},w=Boolean(i&&i.inline);return Object(f.jsxs)(_.a.Group,{className:"mb-0",children:[Object(f.jsxs)(_.a.Label,{className:"d-block",children:[s||t.title,(s||t.title)&&o?"*":null]}),b.map((function(e,t){var i=Array.isArray(j)&&-1!==j.indexOf(e.value),s=e.value==a;return Object(f.jsx)(_.a.Check,{inline:w,label:e.label,id:"".concat(n,"_").concat(e.label),name:n,type:"radio",disabled:r||i||c,checked:s,required:o,value:e.value,onChange:v,onBlur:h,onFocus:O},t)}))]})},k=function(e){var n=e.required,t=e.label,i=e.value,a=e.schema,o=e.rawErrors,r=void 0===o?[]:o;return i?Object(f.jsxs)(_.a.Group,{className:"mb-0",children:[Object(f.jsxs)(_.a.Label,{className:r.length>0?"text-danger":"",children:[t||a.title,(t||a.title)&&n?"*":null]}),Object(f.jsx)("br",{}),Object(f.jsx)("a",{href:i,children:i})]}):null};window.Android=window.Android||{};var N=function(){var e=Object(i.useState)({}),n=Object(r.a)(e,2),t=n[0],a=n[1],o=Object(i.useState)({}),s=Object(r.a)(o,2),d=s[0],l=s[1],u=Object(i.useState)({}),b=Object(r.a)(u,2),v=b[0],h=b[1],O=Object(i.useState)({}),w=Object(r.a)(O,2),m=w[0],p=w[1],y=Object(i.useState)([]),_=Object(r.a)(y,2),E=_[0],A=_[1],N=Object(i.useState)(""),L=Object(r.a)(N,2),T=L[0],B=L[1],J=Object(i.useState)(!1),P=Object(r.a)(J,2),D=P[0],G=P[1],I=Object(i.useState)(!1),z=Object(r.a)(I,2),R=z[0],q=z[1],V=Object(i.useState)(!1),M=Object(r.a)(V,2),W=M[0],H=M[1],U={customfile:x,autocomplete:C,RadioWidget:F,customlink:k};return Object(i.useEffect)((function(){return window.addEventListener("android_schema_event",(function(e){var n=e.detail;a(n.jsonSchema),l(n.uiSchema),G(n.isComplete),H(n.canGoBack),q(!0)})),window.addEventListener("android_data_event",(function(e){console.log("JS FORMDATA",JSON.stringify(e.detail)),h(e.detail)})),window.addEventListener("android_file_event",(function(e){console.log("FILEDATA",e.detail),p(e.detail)})),window.addEventListener("android_rich_text_event",(function(e){console.log("RICH TEXT",JSON.stringify(e.detail)),B(e.detail.rich_text)})),window.addEventListener("android_previous_tasks_event",(function(e){console.log("PREVIOUS TASKS",JSON.stringify(e.detail)),A(e.detail)})),window.Android.listenersReady(),function(){window.removeEventListener("android_json_event",(function(e){return console.log("Event inside webview",e.detail)})),window.removeEventListener("android_ui_event",(function(e){return console.log("Event inside webview",e.detail)})),window.removeEventListener("android_data_event",(function(e){return console.log("Event inside webview",e.detail)})),window.removeEventListener("android_file_event",(function(e){return console.log("Event inside webview",e.detail)})),window.removeEventListener("android_rich_text_event",(function(e){return console.log("Event inside webview",e.detail)})),window.removeEventListener("android_previous_tasks_event",(function(e){return console.log("Event inside webview",e.detail)}))}}),[]),Object(f.jsxs)("div",{style:{paddingTop:"8px",paddingBottom:"16px"},children:[T?Object(f.jsx)(S,{data:T}):null,E.map((function(e,n){var t=e.jsonSchema,i=e.uiSchema,a=e.responses;return Object(f.jsx)(c.a,{schema:t,uiSchema:i,formData:a,widgets:U,disabled:!0,children:" "},n)})),Object(f.jsx)(c.a,{schema:t,uiSchema:d,formData:v,widgets:U,disabled:D,formContext:m,onChange:function(e,n){if(R){h(e.formData);var t=JSON.stringify(e.formData);console.log("ON CHANGE",t),window.Android.onChange(t)}},onSubmit:function(e){h(e.formData);var n=JSON.stringify(e.formData);"Android"in window&&window.Android.onFormSubmit(n)},children:Object(f.jsxs)(j.a,{display:"flex",children:[Object(f.jsx)(g,{type:"submit",disabled:D,children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"}),W&&Object(f.jsx)(g,{style:{margin:"0 8px"},disabled:D,onClick:function(){"Android"in window&&window.Android.onGoToPrevious()},children:"\u041a \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0435\u043c\u0443 \u0442\u0430\u0441\u043a\u0443"})]})})]})},L=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,448)).then((function(n){var t=n.getCLS,i=n.getFID,a=n.getFCP,o=n.getLCP,r=n.getTTFB;t(e),i(e),a(e),o(e),r(e)}))};o.a.render(Object(f.jsx)(N,{}),document.getElementById("root")),L()}},[[424,1,2]]]);
//# sourceMappingURL=main.54c36fca.chunk.js.map