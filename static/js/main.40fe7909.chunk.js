(this.webpackJsonpturnipview=this.webpackJsonpturnipview||[]).push([[0],{205:function(e,n,t){},382:function(e,n,t){},384:function(e,n,t){"use strict";t.r(n);var i=t(0),o=t.n(i),a=t(181),r=t.n(a),c=(t(205),t(17)),s=t(11),d=t(115),l=t(7),u=t(405),j=t(406),O=t(407),b=t(5),v=function(e){return Object(b.jsxs)(j.a,{display:"flex",alignItems:"center",children:[Object(b.jsx)(j.a,{width:"100%",mr:1,children:Object(b.jsx)(u.a,Object(c.a)({variant:"determinate"},e))}),Object(b.jsx)(j.a,{minWidth:35,children:Object(b.jsx)(O.a,{variant:"body2",color:"textSecondary",children:"".concat(Math.round(e.value),"%")})})]})},w=t(403),f=t(402),g=t(12),h=t(35),m=Object(g.a)(w.a)((function(e){return{color:e.theme.palette.getContrastText(h.a[300]),backgroundColor:h.a[300],"&:hover":{backgroundColor:h.a[400]}}}));window.Android=window.Android||{};var E=function(e){var n=e.schema,t=e.uiSchema,o=e.id,a=e.formContext,r=e.disabled,d=(e.onChange,e.value),u=!!t["ui:options"]&&t["ui:options"].private,j=o.replace("root_",""),g=Object(i.useState)({}),h=Object(s.a)(g,2),E=h[0],S=h[1],p=Object(i.useState)({}),x=Object(s.a)(p,2),y=x[0],A=x[1],_=Object(i.useState)({}),L=Object(s.a)(_,2),C=L[0],J=L[1];console.log("FORM PROPS",JSON.stringify(e)),console.log("VALUE",JSON.stringify(d)),Object(i.useEffect)((function(){if(a&&(console.log("formContext",JSON.stringify(a)),a.hasOwnProperty(j))){var n=a[j];console.log("filesData",JSON.stringify(n)),S(n);var t={};if(Object.keys(n).forEach((function(e){n[e].isFinished&&(t[e]=n[e].storagePath)})),Object.keys(t).length>0){var i=Object(c.a)(Object(c.a)({},d),t);console.log("UPLOADED FILES",JSON.stringify(i)),e.onChange(i)}}}),[o,a]),Object(i.useEffect)((function(){d&&(console.log("value useEffect",d),J(d),Object.keys(d).forEach((function(e){var n=d[e];S((function(t){return Object(c.a)(Object(c.a)({},t),{},Object(l.a)({},e,{storagePath:n,isFinished:!0}))}))})))}),[d]);var N=function(n,t){var i=C;console.log("DELETE LOG VALUE: ",JSON.stringify(d),n);var o=Object(c.a)({},E),a=Object(c.a)({},y);if(n in a&&(delete a[n],A(a)),n in o&&(delete o[n],S(o)),n in i){console.log("DELETE LOG PARSED: ",JSON.stringify(i)),delete i[n];var r=JSON.stringify(i);console.log("DELETE LOG AFTER: ",r),J(i),e.onChange(i)}console.log("DELETE LOG newfiles",JSON.stringify(o)),console.log("DELETE LOG loading",JSON.stringify(a))},F=function(e){var n=e.isFinished,t=e.name,i=e.path;return n?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(w.a,{variant:"text",size:"small",onClick:function(){return N(t)},children:"Remove"}),Object(b.jsx)(w.a,{variant:"text",size:"small",onClick:function(){return e=i,void("Android"in window&&(console.log("Preview File",e),window.Android.previewFile(e)));var e},children:"Preview"})]}):Object(b.jsx)(w.a,{variant:"text",size:"small",onClick:function(){return e=t,void("Android"in window&&(console.log("Cancel File",e),window.Android.cancelWork(e)));var e},children:"Cancel"})};return Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{className:"form-label",children:null===n||void 0===n?void 0:n.title}),Object(b.jsx)("br",{}),Object(b.jsxs)(f.a,{spacing:1,direction:"row",children:[Object(b.jsx)(m,{disabled:r,onClick:function(){"Android"in window&&window.Android.pickPhotos(j,u)},size:"small",children:"Photo"}),Object(b.jsx)(m,{disabled:r,onClick:function(){"Android"in window&&(console.log("PARSED ID",j),window.Android.pickVideos(j,u))},size:"small",children:"Video"})]}),Object.keys(E).map((function(e,n){var t="string"===typeof E[e].progress?parseInt(E[e].progress):E[e].progress,i=E[e].storagePath,o=E[e].isFinished;return console.log("FILES: ",JSON.stringify(E)),Object(b.jsxs)("div",{style:{paddingTop:10},children:[Object(b.jsxs)(f.a,{spacing:1,direction:"row",alignItems:"center",children:[Object(b.jsx)(O.a,{noWrap:!0,children:e}),Object(b.jsx)(F,{name:e,path:i,isFinished:o})]}),!o&&Object(b.jsx)(v,{value:null!==t&&void 0!==t?t:0})]},"".concat(e,"_").concat(n))}))]})},S=(t(382),t(383),t(195)),p=function(e){var n=e.data;return Object(b.jsx)(S.a,{id:"ViewerTinyMCE",value:n,toolbar:!1,inline:!1,disabled:!0,tinymceScriptSrc:"/TurnipView/tinymce/tinymce.min.js",init:{plugins:"autoresize",menubar:!1,image_advtab:!0,importcss_append:!0}})};window.Android=window.Android||{};var x=function(){var e=Object(i.useState)({}),n=Object(s.a)(e,2),t=n[0],o=n[1],a=Object(i.useState)({}),r=Object(s.a)(a,2),l=r[0],u=r[1],j=Object(i.useState)({}),O=Object(s.a)(j,2),v=O[0],w=O[1],f=Object(i.useState)({}),g=Object(s.a)(f,2),h=g[0],S=g[1],x=Object(i.useState)([]),y=Object(s.a)(x,2),A=y[0],_=y[1],L=Object(i.useState)(""),C=Object(s.a)(L,2),J=C[0],N=C[1],F=Object(i.useState)(!1),T=Object(s.a)(F,2),k=T[0],D=T[1],P={customfile:E};return Object(i.useEffect)((function(){return window.addEventListener("android_schema_event",(function(e){console.log("SCHEMA",JSON.stringify(e.detail));var n=JSON.parse(e.detail);o(n.jsonSchema),u(n.uiSchema),D(n.isComplete)})),window.addEventListener("android_data_event",(function(e){console.log("JS FORMDATA",e.detail);var n=JSON.parse(e.detail);n&&Object.keys(n).length>0&&w(n)})),window.addEventListener("android_file_event",(function(e){console.log("FILEDATA",e.detail),S(JSON.parse(e.detail))})),window.addEventListener("android_rich_text_event",(function(e){console.log("RICH TEXT",e.detail),N(e.detail.replace('{"rich_text":',"").replace('"',"").replace('"}',""))})),window.addEventListener("android_previous_tasks_event",(function(e){console.log("PREVIOUS TASKS",JSON.stringify(e.detail)),_(JSON.parse(e.detail))})),window.Android.listenersReady(),function(){window.removeEventListener("android_json_event",(function(e){return console.log("Event inside webview",e.detail)})),window.removeEventListener("android_ui_event",(function(e){return console.log("Event inside webview",e.detail)})),window.removeEventListener("android_data_event",(function(e){return console.log("Event inside webview",e.detail)})),window.removeEventListener("android_file_event",(function(e){return console.log("Event inside webview",e.detail)})),window.removeEventListener("android_rich_text_event",(function(e){return console.log("Event inside webview",e.detail)})),window.removeEventListener("android_previous_tasks_event",(function(e){return console.log("Event inside webview",e.detail)}))}}),[]),console.log("FORM DATA",v),Object(b.jsxs)("div",{style:{padding:4},children:[J&&(console.log("TEXT VIEWER",J),Object(b.jsx)(p,{data:J})),A.map((function(e,n){var t=e.jsonSchema,i=e.uiSchema,o=e.responses;return console.log("Prev Task",e),Object(b.jsx)(d.a,{schema:t,uiSchema:i,formData:o,widgets:P,disabled:!0,children:"  "},n)})),Object(b.jsx)(d.a,{schema:t,uiSchema:l,formData:v,widgets:P,disabled:k,formContext:h,onChange:function(e){var n=Object(c.a)(Object(c.a)({},v),e.formData);w(n);var t=JSON.stringify(n);console.log("ON CHANGE",t),"Android"in window&&window.Android.onChange(t)},onSubmit:function(e){var n=Object(c.a)(Object(c.a)({},v),e.formData);w(n);var t=JSON.stringify(n);"Android"in window&&window.Android.onFormSubmit(t)},children:Object(b.jsx)(m,{type:"submit",disabled:k,children:"Submit"})})]})},y=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,408)).then((function(n){var t=n.getCLS,i=n.getFID,o=n.getFCP,a=n.getLCP,r=n.getTTFB;t(e),i(e),o(e),a(e),r(e)}))};r.a.render(Object(b.jsx)(o.a.StrictMode,{children:Object(b.jsx)(x,{})}),document.getElementById("root")),y()}},[[384,1,2]]]);
//# sourceMappingURL=main.40fe7909.chunk.js.map