(this.webpackJsonpturnipview=this.webpackJsonpturnipview||[]).push([[0],{207:function(e,n,t){},385:function(e,n,t){},387:function(e,n,t){"use strict";t.r(n);var i=t(0),o=t(182),r=t.n(o),a=(t(207),t(11)),c=t(116),s=t(115),d=t.n(s),l=t(194),u=t(30),j=t(408),b=t(409),v=t(410),f=t(5),w=function(e){return Object(f.jsxs)(b.a,{display:"flex",alignItems:"center",children:[Object(f.jsx)(b.a,{width:"100%",mr:1,children:Object(f.jsx)(j.a,Object(u.a)({variant:"determinate"},e))}),Object(f.jsx)(b.a,{minWidth:35,children:Object(f.jsx)(v.a,{variant:"body2",color:"textSecondary",children:"".concat(Math.round(e.value),"%")})})]})},O=t(406),h=t(405),m=t(12),g=t(35),p=Object(m.a)(O.a)((function(e){return{color:e.theme.palette.getContrastText(g.a[300]),backgroundColor:g.a[300],"&:hover":{backgroundColor:g.a[400]}}}));window.Android=window.Android||{};var x=function(e){var n=e.schema,t=e.uiSchema,o=e.id,r=e.formContext,c=e.disabled,s=(e.onChange,e.value),j=!!t["ui:options"]&&t["ui:options"].private,b=o.replace("root_",""),m=Object(i.useState)({}),g=Object(a.a)(m,2),x=g[0],S=g[1],_=Object(i.useState)({}),E=Object(a.a)(_,2),y=E[0],A=E[1];Object(i.useEffect)((function(){if(r&&r.hasOwnProperty(b)){var n=r[b];S((function(e){return Object(u.a)(Object(u.a)({},e),n)}));var t={};if(Object.keys(n).forEach((function(e){n[e].isFinished&&(t[e]=n[e].storagePath)})),Object.keys(t).length>0){var i=s&&"string"===typeof s?JSON.parse(s):{},o=JSON.stringify(Object(u.a)(Object(u.a)({},i),t));e.onChange(o)}}}),[o,r]),Object(i.useEffect)((function(){if(s){console.log("value useEffect",s);var e=s&&"string"===typeof s?JSON.parse(s):{};A(e);var n={};Object.keys(e).forEach((function(t){var i=e[t];n[t]={storagePath:i,isFinished:!0}})),S(n)}}),[s]);var C=function(){var n=Object(l.a)(d.a.mark((function n(t){var i,o;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=y,o=Object(u.a)({},x),t in o&&(delete o[t],S(o)),!(t in i)){n.next=9;break}return delete i[t],A(i),n.next=8,e.onChange(JSON.stringify(i));case 8:F();case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),F=function(){return e.onBlur(o,"")},k=function(){return e.onFocus(o,"")},L=function(e){var n=e.isFinished,t=e.name,i=e.path;return n?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(O.a,{variant:"text",size:"small",onClick:function(){return C(t)},onBlur:F,onFocus:k,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),Object(f.jsx)(O.a,{variant:"text",size:"small",onClick:function(){return e=i,void("Android"in window&&(console.log("Preview File",e),window.Android.previewFile(e)));var e},onBlur:F,onFocus:k,children:"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0444\u0430\u0439\u043b"})]}):Object(f.jsx)(O.a,{variant:"text",size:"small",onClick:function(){return e=t,void("Android"in window&&(console.log("Cancel File",e),window.Android.cancelWork(e)));var e},onBlur:F,onFocus:k,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0443"})};return Object(f.jsxs)("div",{children:[Object(f.jsx)("label",{className:"form-label",children:null===n||void 0===n?void 0:n.title}),Object(f.jsx)("br",{}),Object(f.jsxs)(h.a,{spacing:1,direction:"row",children:[Object(f.jsx)(p,{disabled:c,onClick:function(){"Android"in window&&window.Android.pickPhotos(b,j)},size:"small",onBlur:F,onFocus:k,children:"\u0424\u043e\u0442\u043e"}),Object(f.jsx)(p,{disabled:c,onClick:function(){"Android"in window&&window.Android.pickVideos(b,j)},size:"small",onBlur:F,onFocus:k,children:"\u0412\u0438\u0434\u0435\u043e"})]}),Object.keys(x).map((function(e,n){var t,i="string"===typeof x[e].progress?parseInt(x[e].progress):x[e].progress,o=x[e].storagePath,r=x[e].isFinished,a=null!==(t=x[e].workTag)&&void 0!==t?t:"TAG_UPLOAD";return Object(f.jsxs)("div",{style:{paddingTop:10},children:[Object(f.jsxs)(h.a,{spacing:1,direction:"row",alignItems:"center",children:[Object(f.jsx)(v.a,{noWrap:!0,children:e}),Object(f.jsx)(L,{name:e,path:o,isFinished:r})]}),!r&&Object(f.jsxs)("div",{children:[Object(f.jsx)(v.a,{children:"TAG_COMPRESS"===a?"\u0421\u0436\u0430\u0442\u0438\u0435 \u0444\u0430\u0439\u043b\u0430":"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0444\u0430\u0439\u043b\u0430"}),Object(f.jsx)(w,{value:null!==i&&void 0!==i?i:0})]})]},"".concat(e,"_").concat(n))}))]})},S=(t(385),t(386),t(197)),_=function(e){var n=e.data;return Object(f.jsx)(S.a,{id:"ViewerTinyMCE",value:n,inline:!1,disabled:!0,tinymceScriptSrc:"/TurnipView/tinymce/tinymce.min.js",init:{plugins:"autoresize",toolbar:!1,menubar:!1,image_advtab:!0,importcss_append:!0}})};window.Android=window.Android||{};var E=function(){var e=Object(i.useState)({}),n=Object(a.a)(e,2),t=n[0],o=n[1],r=Object(i.useState)({}),s=Object(a.a)(r,2),d=s[0],l=s[1],u=Object(i.useState)({}),j=Object(a.a)(u,2),b=j[0],v=j[1],w=Object(i.useState)({}),O=Object(a.a)(w,2),h=O[0],m=O[1],g=Object(i.useState)([]),S=Object(a.a)(g,2),E=S[0],y=S[1],A=Object(i.useState)(""),C=Object(a.a)(A,2),F=C[0],k=C[1],L=Object(i.useState)(!1),T=Object(a.a)(L,2),J=T[0],N=T[1],P=Object(i.useState)(!1),D=Object(a.a)(P,2),B=D[0],I=D[1],z={customfile:x};return Object(i.useEffect)((function(){return window.addEventListener("android_schema_event",(function(e){var n=e.detail;o(n.jsonSchema),l(n.uiSchema),N(n.isComplete),I(!0)})),window.addEventListener("android_data_event",(function(e){console.log("JS FORMDATA",JSON.stringify(e.detail)),v(e.detail)})),window.addEventListener("android_file_event",(function(e){console.log("FILEDATA",e.detail),m(e.detail)})),window.addEventListener("android_rich_text_event",(function(e){console.log("RICH TEXT",JSON.stringify(e.detail)),k(e.detail.rich_text)})),window.addEventListener("android_previous_tasks_event",(function(e){console.log("PREVIOUS TASKS",JSON.stringify(e.detail)),y(e.detail)})),window.Android.listenersReady(),function(){window.removeEventListener("android_json_event",(function(e){return console.log("Event inside webview",e.detail)})),window.removeEventListener("android_ui_event",(function(e){return console.log("Event inside webview",e.detail)})),window.removeEventListener("android_data_event",(function(e){return console.log("Event inside webview",e.detail)})),window.removeEventListener("android_file_event",(function(e){return console.log("Event inside webview",e.detail)})),window.removeEventListener("android_rich_text_event",(function(e){return console.log("Event inside webview",e.detail)})),window.removeEventListener("android_previous_tasks_event",(function(e){return console.log("Event inside webview",e.detail)}))}}),[]),Object(f.jsxs)("div",{style:{padding:4},children:[F?Object(f.jsx)(_,{data:F}):null,E.map((function(e,n){var t=e.jsonSchema,i=e.uiSchema,o=e.responses;return Object(f.jsx)(c.a,{schema:t,uiSchema:i,formData:o,widgets:z,disabled:!0,children:" "},n)})),Object(f.jsx)(c.a,{schema:t,uiSchema:d,formData:b,widgets:z,disabled:J,formContext:h,onChange:function(e,n){if(B){v(e.formData);var t=JSON.stringify(e.formData);console.log("ON CHANGE",t),window.Android.onChange(t)}},onSubmit:function(e){v(e.formData);var n=JSON.stringify(e.formData);"Android"in window&&window.Android.onFormSubmit(n)},children:Object(f.jsx)(p,{type:"submit",disabled:J,children:"Submit"})})]})},y=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,411)).then((function(n){var t=n.getCLS,i=n.getFID,o=n.getFCP,r=n.getLCP,a=n.getTTFB;t(e),i(e),o(e),r(e),a(e)}))};r.a.render(Object(f.jsx)(E,{}),document.getElementById("root")),y()}},[[387,1,2]]]);
//# sourceMappingURL=main.e35eedde.chunk.js.map