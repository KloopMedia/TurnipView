(this.webpackJsonpturnipview=this.webpackJsonpturnipview||[]).push([[0],{207:function(e,n,t){},385:function(e,n,t){},387:function(e,n,t){"use strict";t.r(n);var i=t(0),o=t(182),r=t.n(o),a=(t(207),t(9)),c=t(116),s=t(115),d=t.n(s),l=t(194),u=t(7),O=t(27),j=t(408),b=t(409),v=t(410),f=t(5),g=function(e){return Object(f.jsxs)(b.a,{display:"flex",alignItems:"center",children:[Object(f.jsx)(b.a,{width:"100%",mr:1,children:Object(f.jsx)(j.a,Object(O.a)({variant:"determinate"},e))}),Object(f.jsx)(b.a,{minWidth:35,children:Object(f.jsx)(v.a,{variant:"body2",color:"textSecondary",children:"".concat(Math.round(e.value),"%")})})]})},w=t(406),h=t(405),E=t(12),m=t(35),p=Object(E.a)(w.a)((function(e){return{color:e.theme.palette.getContrastText(m.a[300]),backgroundColor:m.a[300],"&:hover":{backgroundColor:m.a[400]}}}));window.Android=window.Android||{};var S=function(e){var n=e.schema,t=e.uiSchema,o=e.id,r=e.formContext,c=e.disabled,s=(e.onChange,e.value),j=!!t["ui:options"]&&t["ui:options"].private,b=o.replace("root_",""),E=Object(i.useState)({}),m=Object(a.a)(E,2),S=m[0],x=m[1],A=Object(i.useState)({}),y=Object(a.a)(A,2),N=y[0],C=y[1],L=Object(i.useState)({}),_=Object(a.a)(L,2),F=_[0],J=_[1];console.log("FORM PROPS",JSON.stringify(e)),console.log("VALUE",JSON.stringify(s)),Object(i.useEffect)((function(){if(r&&(console.log("formContext",JSON.stringify(r)),r.hasOwnProperty(b))){var n=r[b];console.log("filesData",JSON.stringify(n)),x(n);var t={};if(Object.keys(n).forEach((function(e){n[e].isFinished&&(t[e]=n[e].storagePath)})),Object.keys(t).length>0){var i=Object(O.a)(Object(O.a)({},s),t);console.log("UPLOADED FILES",JSON.stringify(i)),e.onChange(i)}}}),[o,r]),Object(i.useEffect)((function(){s&&(console.log("value useEffect",s),J(s),Object.keys(s).forEach((function(e){var n=s[e];x((function(t){return Object(O.a)(Object(O.a)({},t),{},Object(u.a)({},e,{storagePath:n,isFinished:!0}))}))})))}),[s]);var k=function(){var n=Object(l.a)(d.a.mark((function n(t,i){var o,r,a,c;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=F,console.log("DELETE LOG VALUE: ",JSON.stringify(s),t),r=Object(O.a)({},S),a=Object(O.a)({},N),t in a&&(delete a[t],C(a)),t in r&&(delete r[t],x(r)),!(t in o)){n.next=15;break}return console.log("DELETE LOG PARSED: ",JSON.stringify(o)),delete o[t],c=JSON.stringify(o),console.log("DELETE LOG AFTER: ",c),J(o),n.next=14,e.onChange(o);case 14:T();case 15:console.log("DELETE LOG newfiles",JSON.stringify(r)),console.log("DELETE LOG loading",JSON.stringify(a));case 17:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),T=function(){return e.onBlur(o,"")},D=function(){return e.onFocus(o,"")},P=function(e){var n=e.isFinished,t=e.name,i=e.path;return n?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(w.a,{variant:"text",size:"small",onClick:function(){return k(t,i)},onBlur:T,onFocus:D,children:"Remove"}),Object(f.jsx)(w.a,{variant:"text",size:"small",onClick:function(){return e=i,void("Android"in window&&(console.log("Preview File",e),window.Android.previewFile(e)));var e},onBlur:T,onFocus:D,children:"Preview"})]}):Object(f.jsx)(w.a,{variant:"text",size:"small",onClick:function(){return e=t,void("Android"in window&&(console.log("Cancel File",e),window.Android.cancelWork(e)));var e},onBlur:T,onFocus:D,children:"Cancel"})};return Object(f.jsxs)("div",{children:[Object(f.jsx)("label",{className:"form-label",children:null===n||void 0===n?void 0:n.title}),Object(f.jsx)("br",{}),Object(f.jsxs)(h.a,{spacing:1,direction:"row",children:[Object(f.jsx)(p,{disabled:c,onClick:function(){"Android"in window&&window.Android.pickPhotos(b,j)},size:"small",onBlur:T,onFocus:D,children:"Photo"}),Object(f.jsx)(p,{disabled:c,onClick:function(){"Android"in window&&(console.log("PARSED ID",b),window.Android.pickVideos(b,j))},size:"small",onBlur:T,onFocus:D,children:"Video"})]}),Object.keys(S).map((function(e,n){var t="string"===typeof S[e].progress?parseInt(S[e].progress):S[e].progress,i=S[e].storagePath,o=S[e].isFinished;return console.log("FILES: ",JSON.stringify(S)),Object(f.jsxs)("div",{style:{paddingTop:10},children:[Object(f.jsxs)(h.a,{spacing:1,direction:"row",alignItems:"center",children:[Object(f.jsx)(v.a,{noWrap:!0,children:e}),Object(f.jsx)(P,{name:e,path:i,isFinished:o})]}),!o&&Object(f.jsx)(g,{value:null!==t&&void 0!==t?t:0})]},"".concat(e,"_").concat(n))}))]})},x=(t(385),t(386),t(197)),A=function(e){var n=e.data;return Object(f.jsx)(x.a,{id:"ViewerTinyMCE",value:n,toolbar:!1,inline:!1,disabled:!0,tinymceScriptSrc:"/TurnipView/tinymce/tinymce.min.js",init:{plugins:"autoresize",menubar:!1,image_advtab:!0,importcss_append:!0}})};window.Android=window.Android||{};var y=function(){var e=Object(i.useState)({}),n=Object(a.a)(e,2),t=n[0],o=n[1],r=Object(i.useState)({}),s=Object(a.a)(r,2),d=s[0],l=s[1],u=Object(i.useState)({}),O=Object(a.a)(u,2),j=O[0],b=O[1],v=Object(i.useState)({}),g=Object(a.a)(v,2),w=g[0],h=g[1],E=Object(i.useState)([]),m=Object(a.a)(E,2),x=m[0],y=m[1],N=Object(i.useState)(""),C=Object(a.a)(N,2),L=C[0],_=C[1],F=Object(i.useState)(!1),J=Object(a.a)(F,2),k=J[0],T=J[1],D=Object(i.useState)(!1),P=Object(a.a)(D,2),I=P[0],R=P[1],G={customfile:S};return Object(i.useEffect)((function(){return window.addEventListener("android_schema_event",(function(e){console.log("SCHEMA",JSON.stringify(e.detail));var n=JSON.parse(e.detail);o(n.jsonSchema),console.log("ON CHANGE JSON"),l(n.uiSchema),console.log("ON CHANGE UI"),T(n.isComplete),console.log("ON CHANGE COMPLETE"),R(!0),console.log("ON CHANGE ALLOW")})),window.addEventListener("android_data_event",(function(e){console.log("JS FORMDATA",e.detail);var n=JSON.parse(e.detail);n&&Object.keys(n).length>0&&b(n)})),window.addEventListener("android_file_event",(function(e){console.log("FILEDATA",e.detail),h(JSON.parse(e.detail))})),window.addEventListener("android_rich_text_event",(function(e){console.log("RICH TEXT",e.detail),_(e.detail.replace('{"rich_text":',"").replace('"',"").replace('"}',""))})),window.addEventListener("android_previous_tasks_event",(function(e){console.log("PREVIOUS TASKS",JSON.stringify(e.detail)),y(JSON.parse(e.detail))})),window.Android.listenersReady(),function(){window.removeEventListener("android_json_event",(function(e){return console.log("Event inside webview",e.detail)})),window.removeEventListener("android_ui_event",(function(e){return console.log("Event inside webview",e.detail)})),window.removeEventListener("android_data_event",(function(e){return console.log("Event inside webview",e.detail)})),window.removeEventListener("android_file_event",(function(e){return console.log("Event inside webview",e.detail)})),window.removeEventListener("android_rich_text_event",(function(e){return console.log("Event inside webview",e.detail)})),window.removeEventListener("android_previous_tasks_event",(function(e){return console.log("Event inside webview",e.detail)}))}}),[]),console.log("FORM DATA",j),Object(f.jsxs)("div",{style:{padding:4},children:[L&&(console.log("TEXT VIEWER",L),Object(f.jsx)(A,{data:L})),x.map((function(e,n){var t=e.jsonSchema,i=e.uiSchema,o=e.responses;return console.log("Prev Task",e),Object(f.jsx)(c.a,{schema:t,uiSchema:i,formData:o,widgets:G,disabled:!0,children:" "},n)})),Object(f.jsx)(c.a,{schema:t,uiSchema:d,formData:j,widgets:G,disabled:k,formContext:w,onChange:function(e,n){if(console.log("ON CHANGE BEFORE IF"),I){b(e.formData);var t=JSON.stringify(e.formData);console.log("ON CHANGE",t),window.Android.onChange(t)}},onSubmit:function(e){b(e.formData);var n=JSON.stringify(e.formData);"Android"in window&&window.Android.onFormSubmit(n)},children:Object(f.jsx)(p,{type:"submit",disabled:k,children:"Submit"})})]})},N=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,411)).then((function(n){var t=n.getCLS,i=n.getFID,o=n.getFCP,r=n.getLCP,a=n.getTTFB;t(e),i(e),o(e),r(e),a(e)}))};r.a.render(Object(f.jsx)(y,{}),document.getElementById("root")),N()}},[[387,1,2]]]);
//# sourceMappingURL=main.84e6d049.chunk.js.map